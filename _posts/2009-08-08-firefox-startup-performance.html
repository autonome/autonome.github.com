---
layout: post
title: Firefox Startup Performance
date: 2009-08-08 00:38:58.000000000 -07:00
categories:
- firefox
- mozilla
tags:
- firefox
- fx-team
- mozilla
- Performance
status: publish
type: post
published: true
meta:
  _edit_last: '267418'
author:
  login: autonome
  email: autonome@gmail.com
  display_name: Dietrich Ayala
  first_name: ''
  last_name: ''
---
<p>A team of Firefox developers and others are working on making Firefox startup faster. Per <a href="http://beltzner.ca/mike/2009/08/07/firefox-team-weekly-roundups-planning-sprinting-and-reporting/">Mike Beltzner's post</a>, we'll be updating our status weekly. Here's the status of what the team did this week, as well as pointers to some other work going on. The list here highlights major points, but is not complete. Many more details of these projects, as well as other areas for investigation can be found on the <a href="https://wiki.mozilla.org/Firefox/Sprints/Startup_Time_Improvements">wiki page</a>, and on <a href="http://blog.vlad1.com/">Vlad</a> and <a href="http://blog.mozilla.com/tglek/">Taras'</a> blogs.</p>
<p><strong>Status</strong></p>
<ul>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=507101">XPCOM component combining</a> (Dietrich): Manually combined a bunch of files, and found improvements in sub 100ms, but varying results, so going to check-in to the Places branch temporarily to get better  numbers. Writing a script to hook into the build system to knit the components together automatically, but need better numbers before going further.</li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=419893">Enabling PGO for SQLite, mozStorage and Places</a> (Dietrich): Made a patch to re-enable PGO for these, and checked into the Places branch. Currently there are unit tests failing, but they look unrelated. Need to trigger more runs to ensure that's the case. Performance numbers are not definitive, need more runs to complete.</li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506128">Dead code  hunting with JSHydra</a> (DDahl): Have basic code for function finding,  making progress on code for building JS context for chrome URIs. (props  for help from taras, humph, jcranmer in #static)</li>
<li>Combining XPT files on Mac (Drew): Potentially significant gain of a few seconds on startup, investigation continuing.</li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=480735">Startup Timeline</a> (Vlad, DDahl): This is still in review.</li>
<li><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=504864">Combining jar files</a> (Taras): This is ready to check-in (again).</li>
</ul>
<p><strong>Next Steps</strong></p>
<ul>
<li> Confirm numbers for combining JS components, finish script to automate combining, work with Ted to hook it into the packaging process, see if any modules can be combined.</li>
<li>Find out why tests are failing for PGO and quantify gain/loss when the slow tinderboxen finally report some numbers.</li>
<li>Get the startup timeline reviewed, landed and start adding markers and performing analysis.</li>
<li>Investigate why wall-clock time of combined jars doesn't decrease.</li>
<li>Get full browser JS context working in JSHydra, write the uncalled-function script, file dead-code bugs, get it plugged into continuous integration on tinderbox.</li>
<li>Get <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=475289">bug 475289</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=499123">bug 499123</a> landed, further reducing IO and component registration time spent at startup.</li>
</ul>
