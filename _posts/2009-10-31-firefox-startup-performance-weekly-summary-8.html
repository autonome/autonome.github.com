---
layout: post
title: Firefox Startup Performance Weekly Summary
date: 2009-10-31 00:18:15.000000000 -07:00
categories:
- firefox
- mozilla
tags:
- firefox
- mozilla
- Performance
- startup
status: publish
type: post
published: true
meta:
  _edit_last: '267418'
author:
  login: autonome
  email: autonome@gmail.com
  display_name: Dietrich Ayala
  first_name: ''
  last_name: ''
---
<p>No numbers summary this week, as 1) there weren't any major landings and 2) I'm working on a script to automate the generation of these summarized numbers. Updates on the week's activity is below. As usual, more details and links are  available on <a href="https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements">the     project wiki</a>, and we're available to answer questions in <a href="irc://irc.mozilla.org/#startup">#startup on irc.mozilla.org</a>.</p>
<ul>
<li>Taras and Joel are working on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=524202">bug 524202</a>, tracking down exactly how and when dynamic library code is loaded. See <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=524202#c3">this comment</a> for a good summary of the issue.</li>
<li>I think I've found a scenario for stable cold startup numbers on Windows, which is basically: 1) Run consume.exe for N seconds where N is how long it takes to consume all physical RAM (and which also pegs the CPU), 2) sleep for 30 seconds (or however long it takes for the system to quiet down) and 3) measure startup time as usual. Next step is to get a Talos patch up, and work with Rel/Eng to get it deployed into testing so we can see numbers on real Talos boxes.</li>
<li>Rob Strong split up the update service in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=311965">bug 311965</a>, has most reviews (affects all toolkit apps) and is about ready to land. This showed a significant win on WinCE startup.</li>
</ul>
<p>Projects in a holding pattern:</p>
<ul>
<li>Drew has a patch up for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506814">bug    506814</a>, getting rid of Change     GetPersistentDescriptor/SetPersistentDescriptor on Mac, just needs   review from Josh.</li>
<li>B<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=512645">ug   512645</a>, removing the setTimeout 10ms wait in chrome JS, <span style="text-decoration:line-through;">is just  waiting on review</span> just needs to be landed (thanks jesse).</li>
<li>Ben Hsieh has been prototyping a whole Fastload cache  replacement in  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=520309">bug   520309</a>.</li>
<li>Ted has been looking at re-enabling rebasing on  Windows in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=484799">bug   484799</a> for a potential performance boost there.</li>
<li>Service caching work in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=516085">bug        516085</a> still needs to be pushed  to  the  Places branch for  testing.</li>
<li>Moving font-loading out of the startup path on Mac: Jonathan Kew    filed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=519445">bug      519445</a> with a WIP patch for yet further reductions in Mac startup      time spent in font system initialization.</li>
<li>JARification: David abandoned <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=509755">moving JS         modules into a JAR file</a>, since those files are fastloaded.        However, since we want things like post-extension-install restarts  to   be     fast, and those cause fastload cache invalidation, we might   want  to   do   things like this anyways. I filed a bug for the same   treatment  for     components. These are lower priority, since they're   not the  normal     startup case. Follow along with all JAR-ification   via<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513027"> the        tracker  bug</a>.</li>
<li>Startup Timeline: No updates, still not landed. Add [ft] in the       whiteboard of your bug w/ the function names you want timed and David       will generate it and update the bug.</li>
<li>Static Analysis: No progress on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506128">bug       506128</a>.  David needs to file a bug with the final log of       named-yet-uncalled  functions.</li>
<li>Dirty Profile Testing: No progress. Need to list scenarios, file       bugs  for each, generate Talos config patches and profile data, and   then     move  it into Rel-Eng territory. Also, need to get a separate      Tinderbox  tree,  since itâ€™s going to cause a bazillion new columns.</li>
<li><a href="http://wagerlabs.com/">Joel       Reymont</a> noted in<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513076"> bug       513076</a> that there are serious drawbacks to getting our libraries in       the dyld  shared cache on Mac, so has deprioritized that work.</li>
<li>No updates on Zack's CSS parser changes in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513149">bug         513149</a>.</li>
</ul>
